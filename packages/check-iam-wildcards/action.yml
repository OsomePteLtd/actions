# action.yml
name: 'Check iam wildcards'
description: 'Checks wildcards in Resources field for iamRoleStatement'

inputs:
  project_name:
    required: true

runs:
  using: 'composite'
  steps:
    - name: Generate BOM file
      run: |
        arr=("shiva" "core")
        if [ "${{ inputs.project_name }}" == "previewer" ]; then
            cp $GITHUB_ACTION_PATH/checkAsterisks.js ./checkAsterisks.js
            node checkAsterisks.js
        elif [[ "${arr[*]}" =~ "${{ inputs.project_name }}" ]]; then
            cp $GITHUB_ACTION_PATH/checkAsterisksWithExceptions.ts ./checkAsterisksWithExceptions.ts
            npx ts-node checkAsterisksWithExceptions.ts
        else
            cp $GITHUB_ACTION_PATH/checkAsterisks.ts ./checkAsterisks.ts
            npx ts-node checkAsterisks.ts
        fi
      shell: bash
